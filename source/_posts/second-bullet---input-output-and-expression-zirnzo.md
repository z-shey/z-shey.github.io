---
title: Second bullet - input, output and expression
date: '2023-11-24 12:42:41'
updated: '2023-11-24 23:26:59'
permalink: /post/second-bullet---input-output-and-expression-zirnzo.html
comments: true
toc: true
---

# Second bullet - input, output and expression

Base on computer-association-activity-sample-code

## Standard input and standard output

OK，在进入正式的篇章之前，我们先来了解一下标准输入和标准输出。

标准输入和标准输出是计算机中常用的两个概念，用于处理数据的输入和输出。

标准输入（Standard Input）是指程序接收输入数据的渠道。具体来说，在命令行界面或终端中，用户可以通过键盘输入数据，这些输入数据将被传递给正在运行的程序作为标准输入。在编程中，可以使用相应的语言特性或函数从标准输入读取数据，例如 C 语言中的 `scanf`​ 函数。

标准输出（Standard Output）是指程序输出结果的渠道。具体来说，程序可以将结果或信息输出到标准输出，以便用户观察或其他程序进行处理。在命令行界面或终端中，标准输出通常会显示在屏幕上。在编程中，可以使用相应的语言特性或函数将数据输出到标准输出，例如 C 语言中的 `printf`​ 函数。

标准输入和标准输出是计算机中重要的输入输出机制，与用户建立起交互。

## printf()

​`printf()`​ 函数是用于格式化输出的函数。它接受一个格式串（format string）作为参数，该格式串指定了输出的格式和布局，并可以在其中插入可能的值。

Visual Studio 中 `printf()`​ 函数的声明

```c
_Check_return_opt_
_CRT_STDIO_INLINE int __CRTDECL printf(
    _In_z_ _Printf_format_string_ char const* const _Format,
    ...)
```

函数的参数包括一个格式化字符串 `_Printf_format_string_ char const* const _Format`​ 和可变参数列表 `...`​。

* ​`_Printf_format_string_` ​用于告诉编译器该参数是一个格式化字符串，以便进行检查。格式串给出了输出的格式和布局。
* ​`...`​ 可变参数列表包含要插入到格式串中的值。

```c
printf(格式串, 表达式);
```

格式串由普通字符和转换说明符组成。普通字符直接输出到标准输出，而转换说明符则指示了如何格式化和插入值。

转换说明符以百分号（%）开头，并紧跟着一个字符，表示要插入的值的类型。常见的转换说明符包括：

|转换说明符|数据类型|
| :--------: | -------------------------------------------------------|
|​`%d`​​|有符号十进制整数（int）|
|​`%u`​​|无符号十进制整数（unsigned int）|
|​`%f`​​|浮点数（float、double）|
|​`%e`​​|科学计数法表示的浮点数（float、double）|
|​`%g`​​|自动选择使用 `%f`​ ​或 `%e`​ ​表示的浮点数（float、double）|
|​`%c`​​|字符（char）|
|​`%s`​​|字符串（char*）|
|​`%p`​​|指针地址|
|​`%x`​​|无符号十六进制整数（小写字母）（unsigned int）|
|​`%X`​​|无符号十六进制整数（大写字母）（unsigned int）|
|​`%o`​​|无符号八进制整数（unsigned int）|
|​`%%`​​|输出一个百分号|

除了转换说明符外，格式串中还可以包含其他字符，如空格、制表符和换行符，用于控制输出的格式。

举个例子，假设有一个整数变量 `age`​ 和一个字符串变量 `name`​，我们可以使用 `printf()`​ 函数按照指定的格式输出这些值：

```c
int age = 20;
char name[] = "Shey Chang";

printf("My age is %d and name is %s.\n", age, name);
```

这将输出：

```text
My age is 20 and name is Shey Chang.

```

普通字符被简单复制给输出行，而变量 age 和 name 被依次替换了 2 个转换说明

通过使用合适的转换说明符和值，可以根据需要格式化输出，并将变量的值插入到指定位置。

> 注意：C 编译器不会检测格式串中的转换说明的数量与输出项是否匹配。

### 转换说明

C 语言中 `printf()`​ 函数中格式说明符的通用格式为 `%[flags][width][.precision]specifier`​。

* ​`%`​：标识格式说明符的起始符号；
* ​`[flags]`​：可选，用于指定一些标志，如左对齐、零填充等。

  * ​`-`​（左对齐）；
  * ​`0`​（数字前面填充 0）；
* ​`[width]`​：可选，用于指定最小字段宽度。如果输出的字符数少于这个值，会用空格或零在左边（或右边，取决于对齐方式）补齐。
* ​`[.precision]`​：可选，用于指定精度。对于字符串类型，表示最大输出字符数；对于浮点数类型，表示小数部分的位数。
* ​`specifier`​：必选，用于指定输出的数据类型，如 d（整数类型）、s（字符串类型）、f（浮点数类型）等。

## scanf()

​`scanf()` ​函数和 `printf()`​ 函数差不多，格式串也包含普通字符和转换说明两部分，在许多情况下，`scanf()` ​函数的格式串只包含转换说明。

```c
scanf(转换说明, 传入地址);
```

```c
int age;
char name[100];

printf("Please input: ");
scanf("%d", &age);

printf("Please input: ");
scanf("%s", name);

printf("My age is %d and name is %s.\n", age, name);
```

```c
#define _CRT_SECURE_NO_WARNINGS
```

### scanf()的工作方法

Visual Studio 中 `scanf()`​ 函数的声明

```c
_Check_return_ _CRT_INSECURE_DEPRECATE(scanf_s)
_CRT_STDIO_INLINE int __CRTDECL scanf(
    _In_z_ _Scanf_format_string_ char const* const _Format,
    ...)
```

* ​`_CRT_INSECURE_DEPRECATE(scanf_s)`​ 这是一个标记，用于指示 `scanf()` ​函数是不安全的，并建议使用更安全的 `scanf_s()` ​函数替代。这是因为 `scanf()` ​函数在处理输入时存在潜在的缓冲区溢出风险。
* ​`_In_z_`​​ ​和 `_Scanf_format_string_`​​ ​是用于静态代码分析的注解，用于指定参数的类型和格式。
* ​`char const* const _Format`​​ ​表示格式串参数
* ​`...`​​ ​表示可变数量的参数

​`scanf()` ​函数本质上是一种匹配模式函数，试图将输入的字符组与转换说明项匹配。当使用 `scanf()` ​函数时，程序会依次读取输入，并尝试根据格式字符串中的转换说明来解释输入的字符组。如果输入与格式字符串中的转换说明匹配，那么数据将被成功读取并存储到相应的变量中。

在寻找的时候 `scanf()`​ 函数会忽略空白字符（空格、水平或垂直制表符、换页符、换行符）。

## 算术运算符

|运算符|描述|
| :------: | ----------------------------|
|​`+`​|加法运算符，用于加两个数|
|​`-`​|减法运算符，用于减去一个数|
|​`*`​|乘法运算符，用于乘两个数|
|​`/`​|除法运算符，用于除以一个数|
|​`%`​|取模运算符，用于取余数|

注意：C语言中的除法运算符 `/`​ 是向下取整的，也就是说会将结果舍去小数部分，只保留整数部分。

## 赋值运算符

当涉及到赋值运算符时，C语言提供了两种类型的赋值运算符：简单赋值运算符和复合赋值运算符。

1. 简单赋值运算符（`=`​）：将右侧表达式的值赋给左侧的变量。它的语法形式为 `变量 = 表达式`​。

```c
int a = 5;
float b = 3.14;
char c = 'X';
```

2. 复合赋值运算符：复合赋值运算符是一种简化的赋值形式，用于对变量进行运算和赋值的组合操作。它的语法形式为 `变量 运算符= 表达式`​。

常见的复合赋值运算符包括：

* 加法赋值（`+=`​）：将右侧表达式的值加到左侧变量上，并将结果赋给左侧变量。

```c
int a = 5;
a += 2; // 相当于 a = a + 2，a的值变为7
```

* 减法赋值（`-=`​）：将右侧表达式的值从左侧变量中减去，并将结果赋给左侧变量。

```c
int a = 5;
a -= 2; // 相当于 a = a - 2，a的值变为3
```

* 乘法赋值（`*=`​）：将右侧表达式的值与左侧变量相乘，并将结果赋给左侧变量。

```c
int a = 5;
a *= 2; // 相当于 a = a * 2，a的值变为10
```

* 除法赋值（`/=`​）：将左侧变量的值除以右侧表达式的值，并将结果赋给左侧变量。

```c
int a = 5;
a /= 2; // 相当于 a = a / 2，a的值变为2
```

* 取模赋值（`%=`​）：将左侧变量的值取模右侧表达式的值，并将结果赋给左侧变量。

```c
int a = 5;
a %= 2; // 相当于 a = a % 2，a的值变为1
```

* 左移赋值（`<<=`​）：将左侧变量的值左移右侧表达式的位数，并将结果赋给左侧变量。

```c
int a = 5;
a <<= 2; // 相当于 a = a << 2，a的值变为20
```

* 右移赋值（`>>=`​）：将左侧变量的值右移右侧表达式的位数，并将结果赋给左侧变量。

```c
int a = 8;
a >>= 1; // 相当于 a = a >> 1，a的值变为4
```

* 按位与赋值（`&=`​）：将左侧变量的值与右侧表达式的值进行按位与操作，并将结果赋给左侧变量。

```c
int a = 12;
a &= 6; // 相当于 a = a & 6，a的值变为4
```

* 按位或赋值（`|=`​）：将左侧变量的值与右侧表达式的值进行按位或操作，并将结果赋给左侧变量。

```c
int a = 15;
a |= 2; // 相当于 a = a | 2，a的值变为15
```

* 按位异或赋值（`^=`​）：将左侧变量的值与右侧表达式的值进行按位异或操作，并将结果赋给左侧变量。

```c
int a = 9;
a ^= 3; // 相当于 a = a ^ 3，a的值变为10
```

## 位运算符

位运算符用于对二进制位进行操作。

1. 按位与（`&`​）：对两个操作数的每个对应位执行逻辑与操作，只有两个位都为1时，结果才为1，否则为0。

```c
int a = 5;    // 二进制表示为 0101
int b = 3;    // 二进制表示为 0011
int result = a & b;   // 结果为 0001，即1
```

2. 按位或（`|`​）：对两个操作数的每个对应位执行逻辑或操作，只要两个位中有一个为1，结果就为1，否则为0。

```c
int a = 5;    // 二进制表示为 0101
int b = 3;    // 二进制表示为 0011
int result = a | b;   // 结果为 0111，即7
```

3. 按位异或（`^`​）：对两个操作数的每个对应位执行逻辑异或操作，当两个位不相同时，结果为1，否则为0。

```c
int a = 5;    // 二进制表示为 0101
int b = 3;    // 二进制表示为 0011
int result = a ^ b;   // 结果为 0110，即6
```

4. 按位取反（`~`​）：对操作数的每个二进制位执行逻辑取反操作，即1变为0，0变为1。

```c
int a = 5;    // 二进制表示为 0000 0101
int result = ~a;   // 结果为 1111 1010，即-6（在补码表示中）
```

5. 左移（`<<`​）：将左操作数的每个二进制位向左移动若干位（由右操作数指定），空出的低位用0填充。

```c
int a = 5;    // 二进制表示为 0000 0101
int result = a << 2;   // 结果为 0001 0100，即20
```

6. 右移（`>>`​）：将左操作数的每个二进制位向右移动若干位（由右操作数指定），空出的高位根据原来的符号位进行填充。

```c
int a = -6;   // 二进制表示为 1111 1010（在补码表示中）
int result = a >> 2;   // 结果为 1111 1110，即-2（在补码表示中）
```

位运算符主要用于处理底层的位操作，在某些场景下，位运算符可以提高执行效率或实现特定功能。

## 自增自减运算符

C语言提供了两种自增（递增）和自减（递减）运算符，用于对变量进行加一或减一操作。这些运算符包括前缀形式和后缀形式。

1. 前缀自增运算符（++var）：先对变量进行加一操作，然后将结果赋给变量。该运算符返回自增后的值。

```c
int a = 5;
int result = ++a;   // a的值变为6，result的值也为6
```

2. 后缀自增运算符（var++）：先将变量的值赋给表达式，然后再对变量进行加一操作。该运算符返回自增前的值。

```c
int a = 5;
int result = a++;   // a的值变为6，result的值为5
```

3. 前缀自减运算符（--var）：先对变量进行减一操作，然后将结果赋给变量。该运算符返回自减后的值。

```c
int a = 5;
int result = --a;   // a的值变为4，result的值也为4
```

4. 后缀自减运算符（var--）：先将变量的值赋给表达式，然后再对变量进行减一操作。该运算符返回自减前的值。

```c
int a = 5;
int result = a--;   // a的值变为4，result的值为5
```

自增和自减运算符可以用于整数类型和浮点数类型的变量。但需要注意的是，在表达式中同时使用自增（自减）运算符多次时，应考虑其执行顺序和副作用。

示例代码：

```c
int a = 5;
int b = ++a + ++a;   // 结果是什么？在此情况下，结果是未定义的。
```

C语言对于自增自减的行为没有明确的规定，结果可能因编译器而异。因此，在使用自增（自减）运算符时，应尽量避免出现复杂的表达式，以保证代码的可读性和预测性。

## 汇编代码

常见的汇编语言命令及其解释

|命令|解释|
| ------| --------------------------------------------------|
|MOV|将数据从一个位置复制到另一个位置|
|ADD|将两个数相加，并将结果存储在目标位置|
|SUB|从一个数中减去另一个数，并将结果存储在目标位置|
|INC|将一个数增加1，并将结果存储在目标位置|
|DEC|将一个数减少1，并将结果存储在目标位置|
|JMP|无条件跳转到指定的位置|
|CMP|比较两个数，并根据比较结果设置标志位|
|JE|如果上一次比较结果为相等，则跳转到指定位置|
|JNE|如果上一次比较结果为不相等，则跳转到指定位置|
|JL|如果上一次比较结果为小于，则跳转到指定位置|
|JG|如果上一次比较结果为大于，则跳转到指定位置|
|AND|对两个数执行逻辑与操作，并将结果存储在目标位置|
|OR|对两个数执行逻辑或操作，并将结果存储在目标位置|
|XOR|对两个数执行逻辑异或操作，并将结果存储在目标位置|
|NOT|对一个数执行逻辑非操作，并将结果存储在目标位置|
|SHL|将一个数左移指定的位数，并将结果存储在目标位置|
|SHR|将一个数右移指定的位数，并将结果存储在目标位置|
|MUL|将两个数相乘，并将结果存储在目标位置|
|DIV|将一个数除以另一个数，并将结果存储在目标位置|
|CALL|调用一个子程序，并将返回地址存储在堆栈中|
|RET|从子程序返回，并将返回地址从堆栈中取出|
|PUSH|将一个值压入堆栈|
|POP|从堆栈中弹出一个值|
|NOP|无操作，用于占位或延时|
|INT|触发一个中断操作|
|HLT|停止CPU的执行，进入停机状态|

## 表达式求值

C语言中的表达式求值是指根据运算符优先级和结合性，计算表达式的结果。这个过程是由编译器或解释器完成的。

C语言中常见运算符的优先级（从高到低）

|运算符|说明|
| ---------| ------------------------|
|​`()`​|圆括号|
|​`[]`​|方括号|
|​`->`​|结构体和共用体成员访问|
|​`.`​|结构体和共用体成员访问|
|​`++`​ `--`​|自增自减|
|​`+`​ `-`​|正负号、加法和减法|
|...|直接不记|

## 表达式语句

C语言中的表达式语句是指由一个表达式和分号组成的语句。

```c
expression;
```

表达式语句可以包含各种类型的表达式，例如赋值表达式、函数调用表达式等。

在表达式语句中，表达式的值会被计算出来，但通常不会被使用，也不会对程序状态造成任何影响。

表达式语句常见于C语言中的循环和条件控制语句，例如while、for和if语句。在这些语句中，表达式语句通常用于控制循环或者判断条件。

```c
x = 10;          // 赋值表达式
printf("hello");  // 函数调用表达式
i++;             // 自增表达式
```

如果表达式中包含了函数调用，则函数的返回值会被计算出来，但如果表达式中没有使用这个返回值，则这个值会被丢弃。因此，在编写表达式语句时，需要注意表达式的副作用和返回值是否有意义。

---

![+¿-Ù_-Ð-¸-¬¦¤¦½¦ÑÐ¨-¢-¦ÛÎ++½¦µ](http://127.0.0.1:6806/assets/+¿-Ù_-Ð-¸-¬¦¤¦½¦ÑÐ¨-¢-¦ÛÎ++½¦µ-20231124232456-av5q85b.png)

‍
